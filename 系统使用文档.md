# 实验室多端Web库存管理系统使用文档

## 1. 系统概述

### 1.1 系统简介

实验室多端Web库存管理系统是一款基于React+Flask+SQLite技术栈开发的现代化库存管理系统，支持自定义表格结构、库存数据管理、角色权限控制和多端兼容。该系统旨在帮助实验室高效管理各类库存物品，提高管理效率和数据准确性。

### 1.2 主要功能

- **用户认证与授权**：支持登录/注销、JWT认证和基于角色的权限控制
- **表格结构管理**：可自定义表格结构，包括列名、数据类型等
- **库存数据管理**：支持库存数据的增删改查、分页查询和按条件筛选
- **报表统计**：提供数据统计报表和柱状图展示，支持CSV导出
- **用户管理**：管理员可进行用户的增删改查操作

### 1.3 技术栈

- **前端**：React.js 18.2.0、Ant Design 5.12.0、Vite 5.0.8
- **后端**：Flask、Python 3.10.11、Flask-SQLAlchemy
- **数据库**：SQLite

## 2. 环境要求

### 2.1 后端环境

- Python 3.8+
- pip 21+

### 2.2 前端环境

- Node.js 16+
- npm 8+

## 3. 安装与部署

### 3.1 后端部署

1. 进入后端目录
   ```bash
   cd backend
   ```

2. 创建虚拟环境（可选）
   ```bash
   python -m venv venv
   ```

3. 激活虚拟环境
   ```bash
   # Windows
   venv\Scripts\activate
   
   # Linux/Mac
   source venv/bin/activate
   ```

4. 安装依赖
   ```bash
   pip install -r requirements.txt
   ```

5. 启动后端服务
   ```bash
   python app.py
   ```

   后端服务将运行在 http://localhost:5000

### 3.2 前端部署

1. 进入前端目录
   ```bash
   cd frontend
   ```

2. 安装依赖
   ```bash
   npm install
   ```

3. 构建生产版本
   ```bash
   npm run build
   ```

4. 部署构建后的文件
   - 构建后的文件位于 `dist` 目录
   - 可使用Nginx、Apache等Web服务器部署

### 3.3 开发模式运行

#### 后端开发模式
```bash
cd backend
python app.py
```

#### 前端开发模式
```bash
cd frontend
npm run dev
```

前端开发服务器将运行在 http://localhost:3000

## 4. 系统功能使用说明

### 4.1 登录与注销

#### 4.1.1 登录

1. 打开系统登录页面
2. 输入用户名和密码
3. 点击"登录"按钮
4. 首次登录或使用默认密码时，系统会提示重置密码

**初始账户**：
- 管理员：用户名 `admin`，密码 `admin123`
- 组长：用户名 `leader`，密码 `leader123`
- 成员：用户名 `member`，密码 `member123`

#### 4.1.2 注销

1. 点击页面右上角的"退出登录"按钮
2. 系统会清除登录状态并跳转至登录页面

### 4.2 表格结构管理

#### 4.2.1 创建表格结构

1. 登录系统后，点击左侧菜单中的"表格定义"
2. 点击"创建表格"按钮
3. 填写表格名称
4. 点击"添加列"按钮，配置列信息：
   - 列名：输入列的名称
   - 数据类型：选择列的数据类型（文本、数字、日期等）
   - 是否隐藏：设置列是否在列表中隐藏
   - 是否自增：设置列是否为自增列
   - 自增前缀：如果是自增列，可设置前缀
5. 点击"保存"按钮，完成表格创建

#### 4.2.2 查看表格列表

1. 登录系统后，点击左侧菜单中的"已定义表格"
2. 页面将显示所有已创建的表格结构

#### 4.2.3 编辑表格结构

1. 在"已定义表格"页面，找到要编辑的表格
2. 点击"编辑"按钮
3. 修改表格名称或列配置
4. 点击"保存"按钮，完成表格编辑

#### 4.2.4 删除表格结构

1. 在"已定义表格"页面，找到要删除的表格
2. 点击"删除"按钮
3. 在弹出的确认对话框中点击"确定"，完成表格删除

### 4.3 库存数据管理

#### 4.3.1 查看库存数据

1. 登录系统后，点击左侧菜单中的"数据管理"
2. 选择要查看的表格
3. 页面将显示该表格的所有库存数据
4. 可使用分页控件查看更多数据

#### 4.3.2 添加库存数据

1. 在"数据管理"页面，选择要添加数据的表格
2. 点击"添加数据"按钮
3. 在弹出的表单中填写各字段的值
4. 点击"保存"按钮，完成数据添加

#### 4.3.3 编辑库存数据

1. 在"数据管理"页面，找到要编辑的数据行
2. 点击"编辑"按钮
3. 在弹出的表单中修改字段值
4. 点击"保存"按钮，完成数据编辑

#### 4.3.4 删除库存数据

1. 在"数据管理"页面，找到要删除的数据行
2. 点击"删除"按钮
3. 在弹出的确认对话框中点击"确定"，完成数据删除

#### 4.3.5 批量删除库存数据

1. 在"数据管理"页面，勾选要删除的数据行
2. 点击"批量删除"按钮
3. 在弹出的确认对话框中点击"确定"，完成批量删除

### 4.4 报表统计

1. 登录系统后，点击左侧菜单中的"报表"
2. 选择要统计的表格
3. 设置统计条件：
   - 时间范围：选择开始日期和结束日期
   - 分组字段：选择要分组统计的字段
4. 点击"查询"按钮，系统将生成统计报表和柱状图
5. 点击"导出CSV"按钮，可将统计数据导出为CSV文件

### 4.5 用户管理（仅管理员可用）

#### 4.5.1 查看用户列表

1. 登录系统后，点击左侧菜单中的"用户管理"
2. 页面将显示所有用户信息

#### 4.5.2 添加用户

1. 在"用户管理"页面，点击"添加用户"按钮
2. 填写用户名、密码和角色
3. 点击"保存"按钮，完成用户添加

#### 4.5.3 编辑用户

1. 在"用户管理"页面，找到要编辑的用户
2. 点击"编辑"按钮
3. 修改用户信息
4. 点击"保存"按钮，完成用户编辑

#### 4.5.4 删除用户

1. 在"用户管理"页面，找到要删除的用户
2. 点击"删除"按钮
3. 在弹出的确认对话框中点击"确定"，完成用户删除

### 4.6 密码管理

#### 4.6.1 修改密码

1. 登录系统后，点击左侧菜单中的"修改密码"
2. 输入原密码和新密码
3. 确认新密码
4. 点击"保存"按钮，完成密码修改

#### 4.6.2 首次登录重置密码

1. 首次登录系统时，系统会自动跳转到密码重置页面
2. 输入用户名（系统自动填充）
3. 输入新密码
4. 确认新密码
5. 点击"保存"按钮，完成密码重置
6. 使用新密码重新登录系统

### 4.7 数据导出与导入

#### 4.7.1 导出所有数据（仅管理员可用）

1. 登录系统后，点击左侧菜单中的"导出所有数据"
2. 系统将生成Excel文件并自动下载

#### 4.7.2 导入数据（仅管理员可用）

1. 登录系统后，点击左侧菜单中的"导入数据"
2. 选择要导入的Excel文件
3. 系统将自动解析并导入数据

### 4.8 Bug反馈

1. 登录系统后，点击左侧菜单中的"Bug反馈"
2. 填写Bug标题和详细描述
3. 点击"提交反馈"按钮
4. 管理员可在Bug列表中查看和处理反馈

## 5. 角色权限说明

### 5.1 管理员（admin）

- 可创建、编辑和删除表格结构
- 可添加、编辑、删除和批量删除库存数据
- 可查看和导出报表
- 可管理用户（添加、编辑、删除用户）
- 可导出所有数据和导入数据
- 可查看和处理Bug反馈

### 5.2 组长（leader）

- 可查看表格结构
- 可添加、编辑、删除和批量删除库存数据
- 可查看和导出报表
- 可提交Bug反馈

### 5.3 成员（member）

- 可查看表格结构
- 可添加和编辑库存数据
- 可查看报表
- 可提交Bug反馈

## 6. 常见问题与解决方案

### 6.1 登录失败

**问题**：输入正确的用户名和密码但登录失败

**解决方案**：
- 检查用户名和密码是否正确
- 检查后端服务是否正常运行
- 检查网络连接是否正常

### 6.2 无法创建表格

**问题**：点击"创建表格"按钮后无响应

**解决方案**：
- 检查是否为管理员权限
- 检查表格名称是否已存在
- 检查列配置是否完整（每列必须有列名和数据类型）

### 6.3 数据无法保存

**问题**：填写数据后点击"保存"按钮无响应

**解决方案**：
- 检查必填字段是否已填写
- 检查数据格式是否符合要求
- 检查后端服务是否正常运行

### 6.4 报表无法生成

**问题**：设置统计条件后点击"查询"按钮无响应

**解决方案**：
- 检查选择的表格是否有数据
- 检查时间范围是否合理
- 检查分组字段是否存在于表格中

### 6.5 数据导出失败

**问题**：点击"导出CSV"按钮后无响应

**解决方案**：
- 检查表格是否有数据
- 检查浏览器是否允许下载文件
- 检查后端服务是否正常运行

## 7. 系统维护

### 7.1 数据库备份

- 定期备份 `instance/inventory.db` 文件
- 备份文件应存储在安全的位置

### 7.2 日志管理

- 系统操作日志可通过API查询
- 建议定期清理旧日志，以提高系统性能

### 7.3 系统更新

- 定期更新系统代码，获取最新功能和安全补丁
- 更新前请备份数据库和配置文件

## 8. 注意事项

1. 首次运行时，系统会自动创建数据库文件 `instance/inventory.db`
2. 建议修改初始管理员密码
3. 生产环境中应配置强JWT密钥
4. 生产环境中建议使用更安全的数据库（如MySQL、PostgreSQL）
5. 定期备份数据库，防止数据丢失
6. 避免在生产环境中使用开发模式运行系统

## 9. 联系方式

如有问题或建议，请联系系统管理员。

---

**文档版本**：v1.0
**更新日期**：2025-12-19
**编写单位**：实验室多端Web库存管理系统开发团队